## 광류 추정(Optical Flow Estimation)

glee1228@naver.com

* 본 내용은 개인적인 공부 목적으로 정리한 글입니다.



## Motion Estimation 의 일반적인 분류

Spatial Domain & Frequency Domain
1. Spatial Domain
   1. Optical Flow
   2. Block Matching
   3. Pel reculsive
2. Frequency Domain
   1. Phase correlation(DFT)
   2. Matching in DCT domain
   3. Matching in wavelet domain



Block-based method & Pixel-based method

1. Block-based method 
   1. Block Matching
   2. Phase correlation(DFT)
   3. Matching in DCT domain
   4. Matching in wavelet domain
2. Pixel-based method
   1. Optical Flow
   
   2. Pel reculsive
   
      

**Optical Flow Estimtion**

Optical Flow은 물체나 카메라의 움직임에 의해 발생하는 두 개의 연속되는 프레임 사이에서 객체의 외관상 움직임의 패턴이다. 각 벡터는 첫 번째 프레임에 존재하는 특정한 점이 두 번째 프레임에서의 점으로의 움직임을 보여주는 motion vector이다.

Block Matching과 같은 블록 기반 Motion Estimation 방법론과 차이점은 두 프레임 사이의 블록 단위가 아닌 픽셀 단위의 모션 벡터를 찾는다는 점이다.



### PREVIEW

**동적 비전**

* 움직이는 세상에서 획득한 여러 프레임의 영상을 대상으로 정보(물체의  정보 등)를 알아내는 기능
* 예시 : CCTV, 스포츠 중계, 자율 주행 차량, 차량용 블랙박스, 로봇 항해, 비디오 검색(Video Retrieval), 게임 등



**어떻게 움직이는 물체를 검출하고 움직이는 방향과 속도, 몸짓 등의 정보를 빠르고 정확하게 알아낼까?**



## 1. 움직이는 상황

* 동적 비전이 처리하는 동영상(연속된 프레임 영상)
  * 시간 축 샘플링 비율
    * 일반적으로 30 프레임/초 (30fps)
    * 특수한 경우, 수천 프레임/초 또는 60 프레임/시

  $$
  f(y,x,t),t = 1\le t \le T
  $$

* 네 가지 상황

  * 정지 카메라와 정지 장면
    * 정지 영상 한 장이 주어진 상황
  * 정지 카메라와 동적 장면
    * 동적 비전에서 다루는 문제 중 가장 단순한 경우로, 많은 연구가 이루어져 성공적인 알고리즘이 가장 많은 상황이다. 과속 단속 또는 주차 관리용 카메라나 감시용 카메라 등은 대부분 고정되어 있으므로 이 상황에 해당한다.
  * 동적 카메라와 정적 장면
    * 불법 주차되어 있는 차량을 찍고 다니는 단속용 차량이 이 경우에 해당한다.
  * 동적 카메라와 동적 장면
    * 가장 복잡한 경우이다. 항해하는 로봇, 자율 주행 자동차, 스포츠 중계 등이 여기에 해당한다. 스스로 방향과 줌을 조절할 수 있는 능동(active vision) 기능을 가진 감시용 카메라도 포함된다.

  

* 알아내야 할 정보

  * 물체가 움직이는 방향과 속도
  * 물체에 대한 행위 인식



* 동적 비전의 기술 난이도
  * 상대적으로 가장 어려운 난이도를 7 가장 쉬운 난이도를 1이라고 두었을 때 다음과 같다.
    1. 움직이는 물체 존재 여부 인식(현관이나 지하 주차장의 자동 소등 장치)
    2. 물체의 개수 파악(교통량, 인파 측정, 현미경 영상에서 세균 밀도 측정)
    3. 물체 추적(감시)
    4. 물체 동작 인식(게임, 감시)
    5. 비디오 검색(방송 콘텐츠 관리)
    6. 장면 이해(항해 로봇, 자율 주행 자동차)
    7. 물체의 3차원 모양과 움직임 재구성(3차원 스포츠 중계)



* 연속 영상 처리 알고리즘

  * 입력 : 연속 영상
    $$
    f(x,t), 1\le t \le T
    $$

  * 출력 : f에서 추출한 움직임 정보

  ```python
  for(t=1 to T){
      f(x,t)를 처리하여 특징 집합 m_t을 추출한다.
  }
  T개의 특징 집합에서 움직임 정보를 생성한다.
  ```

* 영상 일관성

  * 공간 일관성 : 이웃 화소, $f(y,x,t)$와 $f(y+\Delta{y} , x + \Delta{x} , t)$ 는 비슷할 가능성 높음
  * 시간 일관성 : 이웃 프레임, $f(y,x,t)$와 $f(y , x , t+\Delta{t})$ 는 비슷할 가능성 높음



### 차이 영상 : 인접한 영상의 차

* $t$ 는 현재 프레임이고, $r$ 은 기준 프레임($r$ 은 $t-1 $ 또는 물체가 나타나기 이전의 초기 배경 영상)

$$
d_{tr}(y,x)=\begin{cases}
1, & |f(y,x,t)-f(y,x,r)|>\tau \\
0, & otherwise
\end{cases}
$$

* 또는 
  $$
  d_{tr}(y,x)=\begin{cases}
  1, & \frac{1}{\sigma_t*\sigma_r}(\frac{\sigma_t+\sigma_r}{2}+(\frac{\mu_t-\mu_r}{2})^2)^2 > \tau \\
  0, & otherwise
  \end{cases}
  $$



 ![(a) and (b) are two sequence frames. (c) difference frame of (a) and (b)](https://www.researchgate.net/profile/Santhoshkumar_Rajaram/publication/327743831/figure/fig2/AS:672431807160326@1537331644647/a-and-b-are-two-sequence-frames-c-difference-frame-of-a-and-b.png) 

출처 : Rajaram, Santhoshkumar & Geetha, M & J, ARUNNEHRU. (2017). Activity Based Human Emotion Recognition in video. International Journal of Pure and Applied Mathematics. 117. 1185-1194. 



* 차이 영상을 이용한 움직임 추출 알고리즘

  * 배경과 물체의 색상에 큰 변화가 없는 상황에서만 동작
  * 예시 : 공장의 벨트 컨베이어, 조명이 고정된 실내 등
  * 입력 : 두 장의 영상 $f(x,r), f(x,t)$ r은 기준 프레임, t는 현재 프레임
  * 출력 : 움직임 정보

  ```python
  위의 차이영상 식을 이용하여 차이 영상 d를 구한다.
  d의 연결 요소를 구한다.
  크기가 작은 연결요소를 제거한다. # 잡음으로 간주
  적절한 모폴로지 연산을 수행한다. 
  연결 요소를 해석하여 움직임 정보를 추출한다.
  ```



### 모션 필드

* 3차원 모션 벡터 $v_3$ 을 복원할 수 있을까?

  * 불가능 : 수없이 많은 3차원 벡터가 2차원의 동일한 벡터로 투영되는데, 주어진 정보는 2차원이므로
  * 3차원 복원하려면 시점이 다른 여러 대의 카메라를 사용해야 함.

    ![PowerPoint 프레젠테이션](data:image/png;base64,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) 

  

* 2차원 모션 벡터 추정

  * 대부분의 연구는 두 장의 이웃 영상에서 2차원 모션 벡터를 추정하는 일로 국한



* 모션 필드 추정이 근본적으로 어려운 상황

   ![PowerPoint 프레젠테이션](data:image/jpeg;base64,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) 

  

## 2. 광류

### 광류(Optical Flow) 추정의 원리

* Optical Flow는 모션 필드의 근사 추정치

  * Optical Flow 알고리즘은 모든 화소의 모션 벡터 $v=(v,u)$ 를 추정해야 함
  * 숫자로 구성된 영상에서 어떻게 모션 벡터를 추정하나?

   ![PowerPoint 프레젠테이션](data:image/png;base64,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) 

* 어려움

  * 수백*수백 이상 크기의 256 명암 영상
  * 여러 기하 변환과 광도 변환, 잡음 발생
  * 움직이는 물체와 정지한 무레착 혼재하고 움직임 도중에 가림도 발생

* 현실을 적절히 표현하는 모델 필요

  * 실제 세계를 훼손하지 않는 범위 내에서 적절한 가정 필요
  * 밝기 항상성 : 물체의 같은 점은 다음 영상에서 같은(유사한) 명암 값을 가져야 함
    * 현실에  정확히 들어맞지 않지만, 실험 결과에 따르면 받아들일 수 있을 정도의 오차 범위 이내



* 테일러 급수에 따르면,
  $$
  f(y+dy,x+dx,t+dt) = f(y,x,t)+\frac{\partial f}{\partial y}dy+\frac{\partial f}{\partial x}dx+\frac{\partial f}{\partial t}dt+2차\ 이상의\ 항
  $$
  

  * 두 영상 사이의 시간 차이 $dt$ 가 작다고 가정하고 2차 이상의 항은 무시

  * 밝기 항상성 가정에 따라 $f(y+\Delta y,x+\Delta x,t+\Delta t)=f(y,x,t)$ 를 대입하면,

$$
\frac{\partial f}{\partial y}\frac{dy}{dt}+\frac{\partial f}{\partial x}\frac{dx}{dt}+\frac{\partial f}{\partial t}=0
$$

* 위 식의 의미
  * $\frac{\partial f}{dy}$ 와 $\frac{\partial f}{\partial x}$ 는 에지 검출에 사용한 식에 해당
  * $\frac{dy}{dt}$ 와 $\frac{dx}{dt}$ 는 $dt$ 동안 $y$ 와 $x$ 방향으로 이동량이므로 모션 벡터에 해당, 즉 $\frac{dy}{dt}=v$ 이고 $\frac{dx}{dt}=u$ 



* 정리해보면,

$$
\frac{\partial f}{\partial y}v+\frac{\partial f}{dx}u+\frac{\partial f}{\partial t}=0
$$

* 이 식을 광류 조건식(그레디언트 조건식)이라고 부름
* 미분을 이용한 광류 추정 알고리즘(Lucas-Kanade 알고리즘, Horn-Schunck 알고리즘 등)은 대부분 이 식을 이용
* 그레디언트를 구성하는 세 항의 값을 알아도 $v$ 와 $u$ 를 유일한 값으로 결정 불가능
  * 하나의 방정식에 두 개의 미지수 -> 추가적인 가정 필요



* 광류 조건식 예제

  * 편도 함수 값은 다음과 같이 이웃한 점과의 차이로 구한다고 하자.

  $$
  \frac{\partial f}{\partial y} = f(y+1,x,t)-f(t,x,t)
  \\
  \frac{\partial f}{\partial x} = f(y,x+1,t)-f(t,x,t)
  \\
  \frac{\partial f}{\partial t} = f(y,x,t+1)-f(t,x,t)
  $$

  ![PowerPoint 프레젠테이션](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV0AAACQCAMAAACcV0hbAAACTFBMVEX///8AAAC9vb78/Pzz8/PQ0NH4+PhvvkTX19ctV6d9fX/29vby8vKJiImxsLF/fn5wbm/Hx8dGREUSDA6vr69QTk/q6uojHyBkYmLs7OwpJSY1Wqjk5ORxv0ne3t7AwMCTqoqLk6e4xLSmpaWXlpb2//+HhoZrvzxecJo2MzQ/PD3sAADx7fLc7Pr///eSkZH6zs5hX19eojsnSYXn//8DTKRta2yolYNOTEwvLC1QaYn74+z1gSHuKSkbFhcdU6YANpoAQ59efnDcyLCXr8n/9eD4roH0ezP2eAApAzD71MDyd3f3sLDzgoJgrThffLeuutbw38jDq5N8m7i91un77fv/8NL1f0/k1LQiHEn+6MH1knoAAEH72trvQUH4wMD0kpLwWFjvR0fxa2tmk1R5lm+Jm4OWnpVQhTgZSJA6U4dMXohweZA3OkZKbrMQPoEiPnFxib31nJxin0PDzONRVJ4jGxBGaYtrUJTXM0qmQ3OYoLaNWW93haiGrUHHQk2Qo8yXR34tJRkeKUPFczS1hji2QWSqkTr4ACWaoT7bVS7nOisjFiNLWHjj7d+IyWrA4LOt2ZtYuBsAEDVGazPP5sY2Tiiu0p+HzWc7RDWNd4CagXRSVmeCdYRsfIyojnZnMy75qFX1i2duOgVuSyiHYUlJMxsjTncpDQ3PrYmFW0zB3d5WHRysiF9eJACMYDD5v573lzv8xYMAAEQiK1dLOCMnABVjVkcNIDeZg2Y6R0/3nmP7vHM/FgBYNBN8YFc6HB9VAAAAABpYQEvhMVEoAAAgAElEQVR4nO19jWPbxpXnACAgiATxQYIQISNAtYCoiDGJsq1oSYkla2Vu3DSNRZlx7WzddLfbjziKN85q6+1q3fPWe3fZaxIn7vXjYkdNt04dX+PrxyZ10706afuP7byZAUVSlEh9kFKyenEEEAPMG/zw8Oa9N28GCB3QAR3QAf2XoYTd8CPG2xueuHUSxGjPkhoOy6LU5uSPF1lsK0yqawcFY1zYlZpdXI2cnYoOGVOxtfKYFuyYxz4nN7pDOa2CKAm+7wdlC2V2XLPs4z9JqNMYj46FeQeemhP4fjKHDH/HTPY38Zzvkh2zLLh+NicgwUbyJNoxugKtOWxEV9F95GlZD+/FkM4j7+OObpAX4QU2klQ1yuRvyt4FdIO8rOD6YZ+im/ADoswVB/6KZfTxR1cntx9TkJBIJGzb4PEvDZBOaSlnpzVrmpaKa7osEnRtCQkxSbEtFcu0DU/PKJW09RcafK+pbw+VI3rBy+Z8v5zEKtdEKGfAoZ3KrkRrXpNdIcyGfjClYiYycjTQGO1ll98h587Uew6UxPG1/dCDv7HQcBJ4m9mhzWAM00qbezU0RNkGLrwYXlub4eODbjxUCIoCNo5CIrMWsrMgUuUd1qzTmgNAlz1DsSwjaps5SExjpeyp7a7sL7rnPsmo/amW7jb8iOWiSz1d6cynlGenxzLIjyxfE9BNbK3B6yhLawZwnThHVUCgomRUnsKGb/vXo7/oHv7SQ4SeZr89TxY9ngiaksMI+uxkATmymHFCZCuC5dsoKXfBKLpBKWM5jpcjHZmXk2XZz+1QNaxdLiUE6kOogW25PkW67MmymGwnvH3WDNKXjh49+tCX6z/zshMTqcrKWDwfJ/oSCbqHxlHWCZA8ZBqygMJu0K2Tg/tSz6Pibouu4+ymKxyRCEwMuu+KjuO0c4X7jO7TGNyjf7X2u4zbZBBIjRIWEZ+ii0RdzasZjC7KSiA5W0N3/1Bf0X386EOf++ujRx9eO6K7luMDdFZcDgyDyS4yVFSKlQDdchCavJ85QLcTh8e/9NDnzqEv15UuKfSSIvhBAGTASz571YykoSHNAtklXVLooo8k9Q1djO1XzsH2883FtMOykeTgTtln8T1BMQzDD/ClJUf2fSm00EeS+oXu5yi22Chr6L8dxbZDXjZ83L/bZTOKDQDJooJEfMTQIdyVPEB3Uw7nzrUp8nIqLwIBeDzGEjXZtYAupTbo2qwHlCIvSc5RW8kKqHqRVOacijlq8DpMv8RME3WktWo1iVXL+EWuvaxROXECKhOxOj+tLkD7x1ezfVX1k42Wv+hFe8E6g1UOOGJgKuaQTtlk0+TRiCFHONomR8IqAp8ZIpUaSY7A4PhcsrW2dZTwh7NkR9U5gq4ccuSZKD7jp5Y40igxyYm0+WkaxlEz3D5Ed6uUZua7Ru8WeWkm+BzjWIqzBlB0kcAxxZPqjC5COYouMii6SBhmEp+N+DEQE2nWWWRYkIz/GKArROjm2N3yDF0hQldnd6tuC91kC7pShG70NCMQY63oqh8ndLUDdHefDtBt4uDtrrd/gG4TB+9vDm98krNmcgl8V25vF3qX9Wo9QtfbV+jy17+6caDV5qIQkyTEuss/4Njdxkusfo7au3V0MwwGNU3rTnAMhnyui+pzk3RbR3cmshnKET+GLsfc98noaXL1SvqI7tjYV9eXMnHSk76hICEI1Um1q5EaJyiRkI/kl7M+wGpopQBCuk5Y0qAg4WfLxLw34rRADks5gDfmZ/WO7oRg4moVWi1xQhr5mWQgTatXS4ZGgZ8KDfd0WtB4772jNXQHxr7WipsPr7cgxh3weaFNiV3IP9g/1Fd0Bwa+3lwmpn2sLVwWAQNZKWMFnFHDztUKPHshZSaIlk8Vj6QyBSAyxez47N02mUgZ3dx0VK0dsKv5lmot5kBKqtvCL9gLvQvotsArgw5zdS0I4J8eo2HyjNJ5JEzWqN6N+RzzTDPME44zTzhgnrCaor2aqNNezQq4znpX8oeYJ1xinjDjpwQzlJ85yTxhjXnCjB8yU3vSqxF0n2iCN0ciCdAYMtSqBAYg1J1m6OwJt1hk0rY8YbGTJxzj9oXNQNAdeKKxRxknQ9mC7yPSQ1vISKEuR8j33CLbX/YuQ3fsiQaWw3Tf0lGUygLmVVcG2YE30cSBf+JTlL7hrTtHFw1TJ2iFnuf53eTCHqDbxEE6HNH61A/BthWF2fyJ7rK4P6roCkYXzLunPYvixPel3hWm2+ZEbZd6Hj1nnrDHMTtuvc3Aev2tocssF4NhJQwxfuW6zUC3ifU2Q72Sdug++MxuSm9v0LX9lA6tFNTMJPFMxXg+gFCQFeR1uF1JncwQPEQ9T9LK3DAfB3gTaqrUUXxwtSk1QasNwQmxgzV+vECrJfycMK9DtZKZyZACo5yvp7G1RXd2N+HtVw7kfqT26M6e373kl16hK7ImWswEEXimGQxW4LACiWf9pMFEyu1GduyoWlVq5mdgogVMvRpOCz91U7374Ozg7Pmd5cI3UN0i27UageQ484QDjjoffIp5wnrdEya9mqDm2ZhwlnnCYReecCJIM094knnCOot4mlyauLyRwyuW654w7UX98c17NYzuLsJbR/d8d4MT4lpWU8IXNz4v6tX0jWyGTItFFot6tXw3vZrWajMM0adZdyQjT1hp7dXMzugOzj7bRUZyN1RHd256sxrlkLVJnokOSUiZ3PD8PfKE4zM60yvbHJug6A5OTMfWl22D6uhOTCytcxQkeEN4yN028iy1peT7WIkouVDFzS5tWO3eeBOC52e5Emnpdu1diu7g7PSuzH1dQ3dwYqklhBArww2r8BgFMiKRMMMERPXgiKyhfYcukEj19g7RHZxd6qIVHakB3XU1mnkeyW4gug6SCLoyUx5YRcdARFL+RoH0vUMXmURf7RTdwYnVLprRiRrRHZwYaSoLVCQZYuhhI4qgK+rxMCj7QS6JYtrmk6H2zBPGrSRFW0PXjPTAGrqDs81gbIua0G2pMUXMCOIUUdmF/wlackASIzfWDHWbIQpze+kWTzhbR3c7nnDIWNc94WHgpwCSOp3wEnnC6/PI6pWsofuJaEixAd3dgLcF3WcaJiVaKQF4qiB0AnndpJxK0VVgIgWWv41qtf10Fu5K4PPDxN6XyxzxTLHdWSaeMD81TliL2bQPD9EJODJhK6HOpDp6OLjaNHno2M6l1foc8JO551bjxCnBdi5xeHG1pPOQ1Km8R1zkLOdHtmcDumNfYzU3oDs4u/lEVHFdO6WgZVBsDd1ZQhNrTr6bIY+dPFU1Q1wdOUSRy5ONivYRLVyYm5u7sNBtsxrRZUOKTegOPrNZxENs0+fESs28Iw7q336a0vOb1RjTeC8oEYADnue1jR+uw9wdgb3vimVZicaCROTNi6xBLusyY93MwhBar4ZqTx67uFxYPn/sQqyRn70BvxZ06ZBiM7qDz2z8GklT7Y56zZO9txpnELoSDJeN0SYiT1gZnpkBzYtfZZo2HXmm2BMmhjt+lbv3hIUgTfUun6G9mgue8MmJZdw/ZcTC4AWkzMzMDMeIRiIvoBJGY8JtPWGMLh1SbEG3IWCmBIGH312Z94B4wccq0jYcrKVIMYQzjBhKcE0+WW+j50IUb805TI1ItFcT0GTkmTKbQdnQEz73+Jefbj4ioHirzTCjLh/D4OoQ9y3MLeQsxs/mxGZ+/kboDjyhrkN3cPbTdW9f5CwU0wWGbiJjwuoEGuYML6M5GeA7wI9zvOnV7092tMxFc9227gmf+0ri4aNfaak/XG+RnTyJD88Q6C4eSmuMX3cWGUF34FPeOnQxvPV4ZMZHvIxshZA0BFINs77pqzYlIh/aVG568/oz8oOVNTdFFO7WvYmvvIDQ0w+1TJtptHcTeuDJU+bsAnI4PShji2x5DvPLE+NhK+iO/Z2IWtFtCJh5QwgM/SRQzpkBdC2OTR9xsJ1HjMIon6KVw67SOm8CueOkG9g6ui/8NUKffOjh5oNN3oSYKWVmMnPLGDkeCSVOKRw7jNxhSL7YEroA7zp0B2efZYFnYdhfe+0Fko6gcAodIVfLyJyB/jPbZEn0DV3kctDKbXjCGI0XjrYcW0MXfMhstjQTHlrAOlUCPlgFSxG/LaGL4X22FdyGeKTPNYR2ygCrNAWKIDBQ2Vf5cQPfyVQToP1DF82QcFDdE95CnEFqVQx1dD1ODXJeWCrNqBcvYD/MhlAvj3dxhVNQ8dbQHRiYxnD+fSu8LGBmN7aMB6slERfA05pBQUZ2Ybq0km6yqXo9JpwjFhmJZNJ3qO4Jb2FM+MuPtx4hnrDlBXFOliBZTxwnNsMQNsCtby7PrdT5Sd15wnV0L83+w7f+cZ30tkYPgSbXhhvWkr/MZg+gN+gqPPVrBTE/BasEDg0nqeehqJzmkILxFLltR+d4ePEskyNTNiVxOLNuyOPzrQfkzBDvx31RDjlw1H2R5+LOxbllJ2+62ZWJk5P5MEcMbtvkchE/GSDClrEXmaRt0H3gn7710EOtsts+HhmLR7EJv+7/OC2S0Rt0E45tEy2Lt7CmXUJ2WcjKsa16ARywLIWsPaQ4imU3FjTQwy1LycRkLRfwJL6Ar8ZYSRLhd/HYyYWRyyfnLkoLnx68cHGZVGuvVSs08Gu+9zq63/5vR49+a/AQpUZ420R0lMjIrGvjRCuavdIMQvTe1KFK0CE5QWCtibIKom0i0XKgPTmqFqg2sltOJvyWT85OzJ5cdi8cO3nlCv4Ta+QXNWTt2bXTDBjdf47Q7QRvZ+oNuhabtyuow0wn2dkcaEgU5zjwhRPmEPUmjAzp7JCjUb0b89PrPOEXPsd2bD6Im2S8ZJx6wmKWduNWkvLLf/O5oe9cnbhwGNl6uDx7KIF0zI+HEdYhqne9tvOE6zbDv7z4z//494faoNspYNaeeqQZbBpOEIQStRlENvVGDGwHRFgSUvRuE/4wkdmYS9GVhPF1vdrnscWLFDEIA5GF4KUytRliPEU3ZqUBXcO3lZg8cUFCInRmhycuypgfCKskMX6xjT1hDO5/f/F/1AW3Bd3NA2YbUM9tBoKuE1kKKS0Ki5S3MjYh+/Ggab5iG08YMkVgd+VYAfMjOnFh4rk6v258tf/54r9c2hDd7cDbH3u3NM7n4iLEzjLcDDUJurV3BUcN42prR9d25MfOZFULffoQhhLz02R0eHY6ww1Rfp3RHfvXF//X2PTG6M4+sz61uQP1Bd0EpzuxgCoHp8QRIezKV8MWbejLbWbBrEcX+CVLpZL2zEVkpzG/EPPD/puVofw6ojv27Re/C97EhugObj2Bry/oukQxjNOsUGGK9A8d0ZVEsGg3mF/U5AmDjZZK+mFcxy5x6fxJJAM/Afd8gwsAPOHXEd1vH/3uA5uj2xiP7I76gm6M9Og6S93RaNrMZugmZDMMvU1MM4KuoNjmlOkHYTIwU74iILOU9VMLc8gifWq2VMAqGHMi99gJ3Qe+e/TbAx3Q3XKGWX96tSwYUBmfRLRp4gkqb+QJT8a9ZKA6m42BKFYua2JMAzOYccicAzomHMaVwD88dwVlAfxJ/uIhKCoRBp084Qe++68DHdHdKry9QVcQObrKkJUiYV0pFdgwVBJ/KTB1ogat8Ukaf81xZKBL8jiYBKl4YXpqgzYJku0aKlYAST9ITYl0thdnkK0B/AQDoxxDV+aWBeCXW5h7eTxQ6Rqg1niG8FOwXR09uBa9O9AFumvxyK6oR3EG2XVpnMF16dcIRDKj9JW/e+L6wLVXBaxUcQEcx+eRDB/LdQC5wMBXtmQnS4oj8n4Q4A6OF12bJAXhk6BaV3Zku4EfUqDfuXjsSoH3Vy7OLSw8Mzd34UqBNoTGGVxH3iTOMDBNciA3pomJZ7eQwNez3HOpZQv06tjAa6++eu36j4oNB6kkuWoSW7RC0xUKFtUglwt905OtWHPanNR0NaovNGsD2AuDE4cOTVxYwM7wwsKVwbmFxivXVE4jug8w+uqfN9HSyHragtPWI9n16XoJgpchnrDPAX3j+muYYVl95UcDRRH/hsEDWZtRLD7MBfE0FVkvrymyRxWAarjtBcXIUE/Y1ahFpvjEV8PHeRXCrOYXz5793szEoQIsqqVeObaAjQvGT2/fq0XoDow10WZrgnRBPYozuNQTliyyyIVQFmXZnRy7hgQy7lQceE2XZfKGivpMaOK3PCFzBiiAeDyjm57oKJv1apKTpRaZY7I4g0ysEgmekDGFjDiuXT4/exhJZGGui3OHI35OmG6H7sADdRpopLFN1gTpgvpiMxConG+MFVGJ2ryvjv05aF3s4JrhsAMKIJmbDLGoYgOguzyy9vm76QC/J2UUwLwiC9sOiMp4bPB8NrJU265HtiG6GN6dJBz1b+Qn/NQ1fGuqCR+ceOX6/+am4tl4oPrxjG/IlhAt6t9tll4dXcaPWGTI5DRPl5BYKuniyNzhOr+Lz0xyLNTR3t7dEN2dwds3dIXnrr2GysO8pXJYwK7/TSZTymZK5bheyuW0OKZMnBI+1pnKWbrV61fp8DdZSmXCJPXZXp4TUGnYs0zM78ogsnXqiW8V3YGBr20fhr6h6+nXrqEheFG1tFK8/n3su5Ugb0odVgQgmBQJW5BdoROBr0a2BhcjB5QpEyrzykoWa2Asu1n9ZSy7eRBxjUNkGLNMtMTW0W1dcmUL1Dd0M+KrA2gSbpDnDn//+ivQwcPxXZ03kcamfo5DfskXSsbEAposE372oSsI0aTY7aD7xLbh7Y8njO3QKVS8/kMVMvXUPHrgGoo+6rHN7OjmKA6LkbmAtc3FVBs5eXRxEPlpBDleC8fAsEoSzdDeE94U3eY1QbZCPfKEXS6kgwaZYeoZJbEN/sPrr+p6zMk418Z+EBhJ0mQp5MiAJvadfbJVZrKdjaBYKU3sEMmnfm3ET9NjUkiyYTQTHZ44KWhawsmszJ3/Zis/oK7R3Ta8PfImRFGknjAmcjMmQPba9Wuf+NonfvjA2Pd5n6eou/gE4gkbokgiEnBFx/rhJPL5Dry1G/gh0VfpKwAzIQoTswsjS0sn5y4K6/gBdY/u2Ke2HDhv4dAP+v6PwAF67ZU+sTt8ZW5idu7C8gbF7dBth+324e0NujFvknjjghgnnrCk5XwdhmZf+j8/+EEqA2Jn5XJEnlNDQ0MOpJFMEZGVxChJZzOS2bIPjk+XfUjwET+djkE7ARvOHLkqsgLaAbgsCRVo7d7lP+tM28GhN+g6BvWEE3KK3JSmQV60g5KBYRg5gM+boW+wbxoG3L/L017Ndoc692qSnKG9msxAxPxorrucpyDKIe3uHI/lnsvj9KHJWjtPuFfUH5sBBshxX07XlZx0IbuORqHtfKRkd2m+2traIhTEj/fK3BrLPS85OmPl5gFKTSRLFgZ5jn1Wan+si7PL1Cdvwo1AxNJswr0nRY8uYmiFdJH+A3S7pxZ0BV3MsUk3EuTeBDCvlWf5ObRnOkC3e2pBNxdC/IoYNTzcpQ/TqGIsaiWkSZbiAbrdU3OvlgY2eaIbJgFEB6CMVhNxiHW1G54wWr8yd2LmY4iuxdFlboVSisw1ztvIHQcfCfo0BL2ZIuQCJIwHsqEzX5ZJ8pTeOaAqlOn64ILK0aF5h6OZ7cIkHc8XfM5i1VKhFvJZWhBw9npPuFfUo5Ef1TTJ+mC8aZLFnGRfVenqQtFXxELyPTE+ST8hilx8BVmPDK7oVD2pFkbcRNMkiyIDPzEqkGgByT2LqpVwAZmFbeCCTdYj22Xqrye8v+ijii52PKkedAKq7hS+RGInklimM1ndkKpXWy2RYV/JKMm0INfFwt9r1aaktvxsdVKi1ZbFZn5m5iOvdx2VecLGFMuO1ujaIq5J1ati0FxwDAvNjnZ95gkb6S48YSNPezVs59FZ2CpbmdsbZ/zitPPC1VJP2BumsBttR9x7Rf2Knm/4jartjU20jgkL/5U9YdRmXZx9uf7uLtOeobs/VzfeZTpAt5d0gG4vqdforq0D2fIVpZ2tR9Y+06mB3/74RtX2RuM6UiIKOJZZOr/KUQ9JiT5elWLTBP00nSllcawp4xuuw9VAOnWo6ax2THaa8WPJkZgffVfW5nJF/Lj6kLMq9pq6+bzB1sk2A596wkFA1iMT/YCsD2bhAroyNy5AtMAkK3PjE+jK3EHQhSeMr46xap1GfnC10FCtw6qVogIjoAWkGiXWY9pRAuUBHdABHdABHdBWyBklG3d0j9uxVSqyRPLd+3RDD6g4QmGtHo+OVI9XjxdhFmyiMoJkWRYddKSADH8ZoXk4KWERklBV1wuosrRHj2WxVq3Bdp78RUVImluk+/OFIzC/1PHVBGlfZQWXv74X7ZxnM62KIXCfT4Yr1VPV45UlvB8ES8gzl/ga+nFhccU9skDRrQaB7wdBAVaD5Gt7hW5xBC2eYjtk80aBIB4mw9piDdCtLrnzehDiO4G72Rt0oR0yfESEPHdBwtgCuiOQd8WvQhtH5/VsITeK9yi6RMzxZZZjiM68tkfo4qYsHreMw/QO8O/sKXIPxdcLiKK7iOXmRoHIyc0CKn4wUuh7I4tvjKIfj3h6jSGH21RdPYJlV5AcQ15FRS1YEfANHKnhm4nQPQXNRsUbpj8yuleyi4Fc1FfMbI2gKMwvjS6ujuKDlTdsX6Oyu6pU9Zy2BEL8RgFQ7zthcIqi5Rw5TjCDF6hQXV08XkkG2BMsrlYx7IsjWDNUghxW0ATd+dxqEOjJGpbl4ut8uEfowuPGLZ4/RRpVVEdh8SWsg6uZmk1lF6s2H/cLD1ZXC6g6Unz9M/1vJJbd4g3f15hOBQEFzYCKMJVQNAQFCfg/mT132qvhJ1BZUiQ0HyaX96xXWyQvE1FXpOdYzOWSSa2GbnhLTDOAWWGIFsQcLNFwxb1o541CdRorh+NU72I5pehWVz2eN5dQhUz0KmFdBunVtJdGr1N9UIFDxZW907u4EUdOgRRjcrA0uEdqWJ4Xj89TdCtx1fBy0EmMGIa/uic2Q614RA+/vjQaQoPA6qXogp6oRJ+bwFp2MZrFXY3n9Bz+Fy9QXbJHhPvdxZFQHxmFngPTj1fgy1yHZfwjEWkGcg/To5WbcMaN2h60khk0DfZuZQHvV3QtrmmX2SHc2Pl4LpfTVhovrWr4EEa5b21tosVIW9E5C0egpwjpfpXau8UjSd+PY1AX476ZW9mgnt6SPNq4IbRuXfedTBPuFRWjz6q3e+NZgxMWjXwLbHX9AzqgAzqgAzqgAzqgAzqg3aJd/XrwdkjZ2VJUu0rFxzAJlb+kvx4Dc/yxx9aKH4OmVh5raXAVHKAb4BcZhcpyZSXyjStLo9XpIrimBQizBEDUkzZ8CF22uHdwOgvJ0xXUK2+QgNb8eOq5AkzRFQ0R/NqYIiHTfr1A1l1bJM5l8c38bVQpEy+enIYPi+STo4XTz+4mPtuj039B6DBsTzx5+gvk4FOPYhh/8m8/+bf6WScehqN/8Qj5XMsdbmhmJo0bP/88mk/9ERz4n9bO/G3l+TOX0K2p8bOF02fRW7VKVi//7PKZ22je933zrQfhyrtXv/52rfhmrfhWanIylbpceZtLc4XK2dGK7//+qo+hX+TSp1Dls4CuKxqGJ7poMfv2zSV05xL6v1On0P2fv1N4n/teDd2FJ1mNh2G4+spLcPpiNl26DIf/HzToF8fR3b2ILDRTBWT2sRNPVn75y18ydIu/OvHok+j0owg9wr598x8nAF3869cvwM87l7GzPI/RvfPvozH5TXIzU+NX72F0i+/VbAtV3q28ix1UEd/rmav8YhbTeyBJxT/U0J0H0a2hBcd1Xef9yyiRqHwI6EryBzfvrcpS5e1a5TcFgm7xhn6Pu1nGIBbfOV7503uXPVP1xVs/f/Prt9Gd59Hd50bAHQ71UKx85yaJib1dO5157xT66XOp1OQ3F9D8pb0CtZkqj0pPfQGDjKjsSk9hdH+NlcT/Z18dkyoY3cojT6KniDTfgejOmWdR5WffOTU/8z1A91btzLt/BrL7nmqI8/ptwL7y2dHFwpnfjrx/GbAkqVV3p72fHS++yYTq7imsPbzfALrz5RqM3tSwqGOxo7KL5t8bfxnDVnzrd7+tWT++bJi+Kd7y3rxHhPvutAhFp8T3L1VeqkmwP3m1ZmHZvV+TJJDd0+/uj3FuDOpTj/wHpmqkGRi6j/8a1MbTiKIroae+AAr5zm/xS//es6/8/lTxPn5fiez+7t55rBmeRffL+qp85PbiJbRY5uJ6KbiNFlOY8tNQcZHErD4AyN6p4UdSeVvX3sDoVuM5TYvHc3ETy9tdim7l3s0amr93qXh/Gs3f/MydS5V7w9PoF0NT946jyoefIZoBvb/qf3Cq8hs4/feX0fzLo6AZVrEquo9P+uwehe9a6Km/RMVqtXpOqfyS/sbo4mPoJ08TvXEONcuu4r7yTs21IGhZlDFG+JBlK4niSmWh+CeQutPvYnRdUVZV3l0hY8f4H+QdFm/AKmnwHmMlUfygUHkX6qucVej38Dyvena0eL9G0PV8FZPpL9swyODO1zBwvziONYN2CVX/Hd2dIZrcD3zR8EFILdwYfNoyUv33vwcqvHJ2z9ElsbpfP44RfQSI9mOA7ulHpOKJ6JtjgC761SexMNPfxXdIAJWMBFIL4K3hqanx4cvF+1m9dLvybvX5UVR976aefak2H967GXxwNSQBVhEg/LBGZRfX+5tkTssaZ0erH45jwnC8Nf3+87RXW/T9IxglbGzMD5W1e1drdy9Z92sYXfH3I7dOYbUClkMRLI0bfyRNWBzS4TS8d+Z5+H3m9l5rhqdOAKaPPnLiSZBVFNkMJ57EkD/6qxei0wi6px/51RfAJFvMlErc70qZSxhjKZGg0WC8k5Bwv477edE5/W7xzQL6BVHPZ0G/Rj1M8dYqWGejb43nZ8bz+fFVT1U9GQtsFfAofojNNYTrLKYAAAD9SURBVH9llNkMmONZsvkpKIG7t4s3UsfRLWwzVMC8o5qh+E5Zi2tlcvofwEa7O32jVLr3x1Ipc/zOXo6dUKqvzEdxpugWSVZ1sWFl2opADhMgbYdR8T5GKD9VH9VAd5iJefqLo/jWsOxq+kvHCRB3btOKbz2HDbH8QsymRLO3q18crXJTmDj2Klf++JmoADbzL62G916iXeGNn/+B7kTo3tR1vUwOLcJpV2uuTMn60x6MAm9IEtDORiEk9rERAetAyIPHBj6ZBi7VS0DEsbg3X4ZPR+R4fQDBWisgW9lYSxez2HQF+uwTCcjApodA767VWt1oGasDOqAD2pT+E6AFB1gfGdgUAAAAAElFTkSuQmCC)

  * 그림에서 동그라미로 표시한 화소(5,3,t)에 대해 편도함수 값을 계산해보면 다음과 같다.

  $$
  \frac{\partial f}{\partial y} = f(6,3,t)-f(5,3,t) = 7-6=1
  \\
  \frac{\partial f}{\partial x} = f(5,4,t)-f(5,3,t) = 5-6=-1
  \\
  \frac{\partial f}{\partial t} = f(5,3,t+1)-f(5,3,t) = 8-6=2
  $$

* 계산 값을 위에서 정리한 식
  $$
  \frac{\partial f}{\partial y}v+\frac{\partial f}{dx}u+\frac{\partial f}{\partial t}=0
  $$
  에 대입하면 다음과 같은 방정식을 얻는다.
  $$
  v-u+2=0
  $$
  이 식을 해석해보자. 구하려는 모션 벡터 $(v,u)$ 는 이 직선 상에 놓여야 하는데, 유일한 한 점으로 결정할 수는 없다. 이어서 광류 추정 알고리즘에서는 밝기 항상성 이외에 또 다른 가정을 추가하여 유일한 해를 찾는 방법을 다룬다.



* ### Lucas-Kanade 알고리즘

  * 화소 $(y,x)$ 를 중심으로 하는 윈도우 영역 $N(y,x)$ 의 광류는 같다 라는 가정.
  * 즉, 시간적 공간적 연속성과 이웃한 픽셀들의 움직임은 함께 간다는 것을 가정하는 것.

   ![img](https://media.vlpt.us/images/yoorachoi/post/9729aa85-44da-4711-bfec-798ba8244969/image.png) 

  출처 : https://www.youtube.com/watch?v=a-v5_8VGV0A&list=PLjMXczUzEYcHvw5YYSU92WrY8IwhTuq7p&index=8



* 식으로 쓰면,

$$
\frac{\partial f(y_i,x_i)}{\partial y} v
+
\frac{\partial f(y_i,x_i)}{\partial x} u
+
\frac{\partial f(y_i,x_i)}{\partial t}=0, (y_i,x_i)\in N(y,x)
$$

* 행렬 형태로 바꾸어 쓰면,

$$
Av^T=b
\\
이\ 때, A=\begin{bmatrix}
\frac{\partial f(y_1,x_1)}{\partial y}  & \frac{\partial f(y_1,x_1)}{\partial x} \\
\vdots & \vdots \\
\frac{\partial f(y_n,x_n)}{\partial y}  & \frac{\partial f(y_n,x_n)}{\partial x}
\end{bmatrix}
,
v=(v \ u)
, 
b=\begin{bmatrix}
-\frac{\partial f(y_1,x_1)}{\partial t}  \\
\vdots \\
-\frac{\partial f(y_n,x_n)}{\partial t}  
\end{bmatrix}
$$

* $v$ 로 정리하면,

$$
v^T=(A^TA)^{-1}A^Tb
$$

* 행렬의 원소가 나타나도록 쓰면,

$$
v^T={v \choose u}
=
\begin{bmatrix}
\sum_{i=1}^n(\frac{\partial f(y_i,x_i)}{\partial y} )^2 & \sum_{i=1}^n\frac{\partial f(y_i,x_i)}{\partial y}\frac{\partial f(y_i,x_i)}{\partial x} \\

\sum_{i=1}^n\frac{\partial f(y_i,x_i)}{\partial y}\frac{\partial f(y_i,x_i)}{\partial x}  & \sum_{i=1}^n(\frac{\partial f(y_i,x_i)}{\partial x} )^2
\end{bmatrix}^{-1}
\begin{bmatrix}
-\sum_{i=1}^n\frac{\partial f(y_i,x_i)}{\partial y}\frac{\partial f(y_i,x_i)}{\partial t} \\

-\sum_{i=1}^n\frac{\partial f(y_i,x_i)}{\partial x}\frac{\partial f(y_i,x_i)}{\partial t}  
\end{bmatrix}
$$



* 가우시안 스무딩 항을 추가하면,

$$
A^TWAv^T=A^TWb, 이\ 식을\ 풀면\ v^T=(A^TWA)^{-1}A^TWb \qquad 식\ 10.10
$$

* 행렬의 원소가 나타나도록 풀어 쓰면,

$$
{v \choose u}
=
\begin{bmatrix}
\sum_{i=1}^nw_i(\frac{\partial f(y_i,x_i)}{\partial y} )^2 & \sum_{i=1}^n w_i\frac{\partial f(y_i,x_i)}{\partial y}\frac{\partial f(y_i,x_i)}{\partial x} \\

\sum_{i=1}^n w_i \frac{\partial f(y_i,x_i)}{\partial y}\frac{\partial f(y_i,x_i)}{\partial x}  & \sum_{i=1}^n w_i(\frac{\partial f(y_i,x_i)}{\partial x} )^2
\end{bmatrix}^{-1}
\begin{bmatrix}
-\sum_{i=1}^n w_i\frac{\partial f(y_i,x_i)}{\partial y}\frac{\partial f(y_i,x_i)}{\partial t} \\

-\sum_{i=1}^n w_i \frac{\partial f(y_i,x_i)}{\partial x}\frac{\partial f(y_i,x_i)}{\partial t}  
\end{bmatrix}
$$

* Lucas-Kanade 광류 알고리즘
  * 입력 : 인접한 두 장의 영상 $f(y,x,t)$ 와 $f(y,x,t+1), 0 \le y \le M-1, 0\le x \le N-1$, 임계값 $\epsilon$ 
  * 출력 : 광류 맵 $v(y,x),0\le y\le M-1, 0\le x\le N-1$

```python
for(y=0 to M-1)
	for(x=0 to N-1)
    	v(y,x) = velocity_vector(y,x,f_t,f_{t+1}); # f_t와 f_{t+1} 은 두장의 입력 영상
function velocity_vector(y,x,f_t,f_{t+1}){
    if((y,x)에 씌운 윈도우가 영상을 벗어나지 않으면){ # 영상의 경계 부근은 제외
        cy=y;
        cx=x;
        repeat{
            식 10.10을 이용하여 화소 (cy,cx)의 모션 벡터 (v,u)를 계산한다.
            cy=cy+v;cx=cx+u;
        }until(||(v,u)||<epsilon);
        return ((cy-y,cx-x)); # (cy-y,cx-x)는 추정된 모션 벡터
    }
    else return(Nil); # (y,x)는 광류 계산 불가
}
```

* Lucas-Kanade 광류 알고리즘의 특성
  * 이웃 영역만 보는 지역적 알고리즘
    * 윈도우의 크기 중요 - 클수록 큰 움직임을 알아낼 수 있지만 스무딩 효과로 모션 벡터의 정확성 낮아짐
    * 해결책으로 피라미드 활용하는 기법
  * 명암 변화가 적은 물체 내부에 0인 벡터 발생





## 최근 Optical Flow Estimation 기술 조사

**논문 제목 : Models Matter, So Does Training: An Empirical Study of CNNs for Optical Flow Estimation (CVPR 2018)**

**논문 링크 :** [**https://arxiv.org/pdf/1809.05571v1.pdf**](https://arxiv.org/pdf/1809.05571v1.pdf)

**논문 내용 :** 



**기존의 연구 및 배경지식**

**Optical Flow Estimation using a Spatial Pyramid Network, CVPR 2017**

SpyNet는 다음의 방법을 도입하여 높은 정확성을 유지하면서 모델 매개변수를 크게 줄일 수 있었다. (고전적 방법론과 DNN 결합 + 메모리 요구사항 감소)

![img](img/optical_flow/clip_image001.png)

1. Warping Function을 직접 사용하면서 CNN은 이를 학습할 필요가 없다.

2. Spatial Pyramid 구조를 이용해 각 피라미드 레벨에 있는 residual flow를 학습한다(Coarse-to-Fine형태의 제안, 이는 각 네트워크가 임의로 큰 모션을 추정할 필요가 없기 때문에 FlowNet과 같은 방법보다 훨씬 적은 매개변수를 필요로 한다) 

**![img](img/optical_flow/clip_image003.jpg)**

**SpyNet 논문 링크 :** [**https://arxiv.org/pdf/1611.00850v2.pdf**](https://arxiv.org/pdf/1611.00850v2.pdf) 

**주요 제안 내용**

**주요 Contribution :** original이미지는 그림자와 조명에 민감하므로 **학습 가능한 feature pyramid를 이용하여 밝기 변화에 강인**하게 만들 수 있고, **기존의 warping 연산을 네트워크의 레이어로 접근하여 큰 움직임을 추정할 수 있다**. 마지막으로 **warping과 cost volume을 처리하는 레이어는 학습 가능한 매개변수가 없으므로 모델 크기를 줄인다**.

SpyNet과 FlowNetC(Correleation) 기반으로 개선된 아키텍처

![img](img/optical_flow/clip_image005.jpg)

Feature pyramid extractor, warping layer, cost volume layer의 3가지 주요 부분으로 설계

Feature pyramid extractor : SpyNet과 마찬가지로 여러 피라미드 레벨로 거친 coarse-to-fine 방식으로 optical flow를 추정한다. SpyNet은 이미지를 다운샘플링하여 이미지 피라미드를 구성하지만, PWC-Net은 CNN을 사용하여 feature pyramid를 구성한다.

warping layer : feature에 대한 warping이 큰 motion을 보상하기 때문에, 작은 검색 범위를 이용하여 cost volume을 구성할 수 있는 장점이 있다.

cost volume layer : Source Image에서 Feature map을 구성하고, Target Image에서 Warping된 feature map을 이용하여 cost volume을 구성한다. (Cost Volume을 제거하면, Avg.EPE가 15% 악화)

![img](img/optical_flow/clip_image007.jpg)

SpyNet과 유사하게 훈련하지만 차이점은 다음과 같다.

SpyNet은 프레임들을 warping하고, PWC-Net은 feature map을 warping한다.

SpyNet은 CNN에 프레임을 입력하고, PWC-Net은 cost volume을 입력한다.

SpyNet은 가우시안 블러링을 사용해 Data Augmentation을 진행하지만, PWC-Net은 이미지 피라미드를 만들기 위해 가우시안 노이즈를 사용하지 않는다, end-to-end 학습이 가능하며 cost volume은 FlowNetC의 Correlation 레이어에 의해 생성된다.

**실험 결과**

**![img](img/optical_flow/clip_image009.jpg)**

**![img](img/optical_flow/clip_image010.png)**

**오픈소스(torch version) :** 

 [**https://github.com/NVlabs/PWC-Net**](https://github.com/NVlabs/PWC-Net)

**발전 가능성이 있었던 문제들 / 해당 문제를 해결한 논문들**

Feature Warping은 Optical Flow의 핵심 기법이지만, Warping 하는 도중 가려진 부위(occlusion)로 생기는 상황에서 신뢰할 수 없는 정보(ambiguous information)를 사용할 수 있다는 문제점이 있다. 

해당 문제를 개선한 논문은 아래와 같다.

 

 

 

 

 

 

 

**논문 제목 : MaskFlownet: Asymmetric Feature Matching with Learnable Occlusion Mask(CVPR 2020)**

**논문 링크 :** [**https://arxiv.org/pdf/2003.10955v2.pdf**](https://arxiv.org/pdf/2003.10955v2.pdf)

**논문 내용 :** 

**기존의 연구 및 배경지식**

PWC-Net에서 제안한 feature pyramid, feature warping , cost volume등은 optical flow estimation을 위한 원칙적인 네트워크 설계를 이용한 학습 방법에 많은 진전을 주었고, 이후 연구에도 많이 사용되었다. 그리고 feature warping은 long-range matching문제를 효과적으로 해결해주었다.

**주요 제안 내용**

주요 Contribution : 유용한 부분과 혼동되는 정보를 네트워크를 통해 구분하는 것보다 warping된 feature에 대해 학습 가능한 occlusion mask를 적용하여 성능을 높였다. 결과적으로 occlusion masking이 잠재적으로 cost volume 처리를 용이하게 만들 수 있음을 보였고, Asymmetric Occlusion-Aware Feature Matching Module (AsymOFMM)을 제안하였다.

PWC-Net의 Feature Matching Module(FMM)은 Warping작업과 Correlation 레이어로 구성되어 있다. 

**![img](img/optical_flow/clip_image012.jpg)**

Occlusion-Aware Feature Matching Module (OFMM)은 Warping작업 직후 불필요한 정보를 필터(학습 가능한 occlusion mask=![img](file:///C:/Users/user/AppData/Local/Temp/msohtmlclip1/01/clip_image014.png))를 통해 필터링하고 trade off term(=![img](file:///C:/Users/user/AppData/Local/Temp/msohtmlclip1/01/clip_image016.png))는 occlusion mask학습을 용이하게 만드는 term이다.

**![img](img/optical_flow/clip_image018.jpg)**

Asymmetric Occlusion-Aware Feature Matching Module (AsymOFMM)은 Warping작업과 extra convolution 레이어를 deformable Convolution 레이어로 대체한다.

![img](img/optical_flow/clip_image020.jpg)

직관적으로Warping작업이 Occlusion 영역에 feature matching 과정의 대칭성을 깨뜨리기 때문에 이러한 AsymOFMM의 비대칭적 설계가 이런 문제를 해결 할 수 있다.

아래 그림은 MaskFlowNet의 전체 아키텍처를 보여준다. 왼쪽이 PWE-Net의 FMM을 AsymOFMM으로 대체한 MaskFlownet-S이고, 오른쪽은 이중 피라미드를 이용한 정교화 과정을 위한 계단식 네트워크이다. 

**![img](img/optical_flow/clip_image022.jpg)**

**실험 결과**

**![img](img/optical_flow/clip_image024.jpg)**

**KITTI 2015,2012,Sintel clean, Sintel final 모든 벤치마크 test 성능에서 SOTA를 달성한 논문이다.**

**오픈소스(mxnet version) :**

[**https://github.com/microsoft/MaskFlownet**](https://github.com/microsoft/MaskFlownet)